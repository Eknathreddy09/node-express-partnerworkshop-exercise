accelerator:
  displayName: Node Express
  description: A Node.js sample app using Express
  iconUrl: https://seeklogo.com/images/N/nodejs-logo-FBE122E377-seeklogo.com.png
  tags:
  - node
  - express

  # options for the UI
  options:
  - name: projectDescription
    label: Description
    display: true
    defaultValue: ''
  - name: includeK8s
    label: "Include kubernetes resources?"
    inputType: toggle
    dataType: boolean
    defaultValue: true
    required: true

engine:
  merge:
    - include: [ "**" ]
      exclude: [ "kubernetes/**", "README.md", "k8s.md", "skaffold.md" ]
    - include: [ "package.json" ]
      chain:
      - type: ReplaceText
        substitutions:
        - text: node-express
          with: "#artifactId"
        - text: accelerator-description
          with: "#projectDescription"
    - include: [ "kubernetes/deployment.yml", "kubernetes/service.yml" ]
      condition: "#includeK8s"
      chain:
      - type: ReplaceText
        substitutions:
        - text: node-express
          with: "#artifactId"
    - include: [ "kubernetes/skaffold.yml" ]
      condition: "#includeK8s"
      chain:
      - type: ReplaceText
        substitutions:
        - text: node-express
          with: "#artifactId"
      - type: RewritePath
        rewriteTo: "#filename"
    - name: README
      type: Combo
      onConflict: Append
      merge:
      - include: [ "README.md"]
        chain:
        - type: ReplaceText
          substitutions:
          - text: node-express
            with: "#artifactId"
      - include: ["k8s.md"]
        condition: "#includeK8s"
        chain:
        - type: ReplaceText
          substitutions:
          - text: node-express
            with: "#artifactId"
        - type: RewritePath
          rewriteTo: "'README.md'"
